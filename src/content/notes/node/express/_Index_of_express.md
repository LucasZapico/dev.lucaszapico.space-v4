---
title: '_Index_of_express'
description: ''
date-created: '2022/02/22'
last-modified: '2022/02/22''
categories: [] 
tags: ['validation', 'express', 'notes', MOC]
isdraft: false
type: ''
--- ---
title: '_Index_of_express'
description: ''
date-created: '2022/02/22'
last-modified: '2022/02/22''
categories: [] 
tags: ['validation', 'express', 'notes']
isdraft: false
type: ''
---
%% Zoottelkeeper: Beginning of the autogenerated index file list  %%
 [[notes/node/express/express-best-practices-patterns|express-best-practices-patterns]]
%% Zoottelkeeper: End of the autogenerated index file list  %%



# _Index_of_express

## Express Validation 

__Package Install__
```
npm i express-validator
```

__Example -inline__

*index.js*
```javascript 
//...
const { validationResult, body } = require('express-validator')

//...

const app = express()

//...
//... validator example
app.post("/users", [
  body("email")
    .isLength({ min: 1 })
    .withMessage("email must not be empty")
    .isEmail()
    .withMessage("must be a valid email address"),
  body("name").isLength({ min: 1 }).withMessage("name must not be empty"),
]),
  async (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty) {
      return res.status(400).json(errors.mapped());
    }
  };


```

__Example - abstracted

%%todo: enhance validation notes%%

*index.js*
```javascript 
//...
const { validationResult, body } = require('express-validator')

//...

const app = express()

const userValidation = [
  body("email")
    .isLength({ min: 1 })
    .withMessage("email must not be empty")
    .isEmail()
    .withMessage("must be a valid email address"),
  body("name").isLength({ min: 1 }).withMessage("name must not be empty"),
]

//... validation middleware 
const checkForErrors = (req, res, next) => {
	const errors = validationResult(req);
    if (!errors.isEmpty) {
      return res.status(400).json(errors.mapped());
	} else {
		next()
	}
}

const simpleValiationResult = validationResult.withDefaults({
	formatter: (err) => err.msg
})

//...
//... validator example
app.post("/users", userValidation, checkForErrors ),
  async (req, res) => {
		try{
			return res.status(200).json({'message': 'valid input'})
		}catch(err) {
			return res.status(500).json(err)
		}
}
    


```